echo 'Hello from Pipeline Demo' 
pipeline {
	agent { node {git url: 'https://github.com/hatcherb/spring-petclinic.git'}}

        stages {
		stage('Compile'){
			steps{
				sh "/usr/bin/mvn -B compile war:war" 
				}
			} 
       		 stage('Test'){ 
            		steps{
				sh "/usr/bin/mvn -B verify" 
				step([$class: 'ArtifactArchiver', artifacts: '**/target/*.war', fingerprint: true])   
				step([$class: 'JUnitResultArchiver', testResults: '**/target/surefire-reports/TEST-*.xml']) 
				} 
			}
		}
	}

